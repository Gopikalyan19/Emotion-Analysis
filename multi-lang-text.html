<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multilingual Emotion Analyzer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --bg: #f8fafc;
            --text: #1e293b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, sans-serif;
        }

        body {
            min-height: 100vh;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
        }

        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1rem;
        }

        h1 {
            font-size: 1.875rem;
            font-weight: 600;
            margin-bottom: 2rem;
            text-align: center;
            color: var(--text);
        }

        .input-section {
            background: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            margin-bottom: 1.5rem;
        }

        .language-selector {
            margin-bottom: 1rem;
        }

        select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            resize: vertical;
            font-size: 1rem;
            margin-bottom: 1rem;
            transition: border-color 0.15s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .controls {
            display: flex;
            gap: 0.75rem;
        }

        button {
            padding: 0.625rem 1.25rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .primary-button {
            background: var(--primary);
            color: white;
        }

        .primary-button:hover {
            background: var(--primary-dark);
        }

        .secondary-button {
            background: #e2e8f0;
            color: var(--text);
        }

        .secondary-button:hover {
            background: #cbd5e1;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .detected-language {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 1rem;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .emotion-card {
            background: white;
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
        }

        .emotion-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .emotion-icon {
            font-size: 1.5rem;
        }

        .confidence-bar {
            height: 6px;
            background: #f1f5f9;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .confidence-level {
            height: 100%;
            background: var(--primary);
            width: 0;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .chart-container {
            background: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            height: 400px;
        }

        .loading {
            position: fixed;
            inset: 0;
            background: rgba(255, 255, 255, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 640px) {
            .container {
                margin: 1rem auto;
                padding: 0.75rem;
            }

            .controls {
                flex-direction: column;
            }

            .chart-container {
                height: 300px;
            }
        }
    </style>
    <style>
         .back-button {
            position: fixed;
            top: 1.5rem;
            left: 1.5rem;
            background: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            font-size: 0.9rem;
            color: var(--text-dark);
            z-index: 100;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .back-arrow {
            font-size: 1.2rem;
        }
        @media (max-width: 768px) {
            .back-button {
                top: 1rem;
                left: 1rem;
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" style="text-decoration: none;" class="back-button">
        <span class="back-arrow">‚Üê</span>
        Back
    </a>
    <br> <br>

    <div class="loading" id="loadingIndicator">
        <div class="loading-spinner"></div>
    </div>

    <div class="container">
        <h1>Multilingual Emotion Analyzer</h1>
        
        <div class="input-section">
            <div class="language-selector">
                <select id="languageSelect" onchange="updatePlaceholder()">
                    <option value="auto">Auto Detect Language</option>
                    <option value="en">English</option>
                    <option value="es">Espa√±ol</option>
                    <option value="fr">Fran√ßais</option>
                    <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                    <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                    <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                    <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                    <option value="ja">Êó•Êú¨Ë™û</option>
                    <option value="zh">‰∏≠Êñá</option>

                </select>
            </div>
            
            <div id="detectedLanguage" class="detected-language"></div>
            
            <textarea id="textInput" 
                      placeholder="Enter your text here (minimum 3 words)..."
                      aria-label="Text input for emotion analysis"></textarea>
            
            <div class="controls">
                <button class="primary-button" id="analyzeButton" onclick="analyzeText()">
                    Analyze Emotions
                </button>
                <button class="secondary-button" onclick="clearText()">
                    Clear
                </button>
            </div>
        </div>

        <div class="results-grid" id="resultsGrid"></div>

        <div class="chart-container">
            <canvas id="emotionChart"></canvas>
        </div>
    </div>

    <script>
        const emotionKeywords = {
            en: {
                joy: ['happy', 'joy', 'delighted', 'great', 'excellent', 'good', 'wonderful', 'amazing', 'love', 'smile', 'pleased', 'excited', 'cheerful', 'blessed', 'grateful'],
                sadness: ['sad', 'unhappy', 'depressed', 'miserable', 'terrible', 'sorry', 'lost', 'cry', 'disappointed', 'heartbroken', 'grief', 'lonely', 'hopeless', 'down'],
                anger: ['angry', 'mad', 'furious', 'irritated', 'annoyed', 'hate', 'rage', 'frustrated', 'upset', 'outraged', 'bitter', 'hostile', 'enraged'],
                fear: ['afraid', 'scared', 'frightened', 'worried', 'terrified', 'nervous', 'anxious', 'panic', 'stressed', 'concerned', 'uneasy', 'dread', 'horror'],
                surprise: ['surprised', 'shocked', 'amazed', 'unexpected', 'wow', 'astonished', 'incredible', 'startled', 'stunned', 'speechless', 'bewildered'],
                neutral: ['okay', 'fine', 'normal', 'average', 'usual', 'typical', 'regular', 'moderate', 'standard', 'common', 'ordinary']
            },
            es: {
                joy: ['feliz', 'alegre', 'contento', 'encantado', 'dichoso', 'radiante', 'maravilloso', 'genial', 'amor', 'sonrisa'],
                sadness: ['triste', 'infeliz', 'deprimido', 'miserable', 'terrible', 'perdido', 'llorar', 'decepcionado'],
                anger: ['enfadado', 'enojado', 'furioso', 'irritado', 'molesto', 'odio', 'rabia', 'frustrado'],
                fear: ['asustado', 'temeroso', 'preocupado', 'aterrado', 'nervioso', 'ansioso', 'p√°nico'],
                surprise: ['sorprendido', 'asombrado', 'impresionado', 'inesperado', 'incre√≠ble', 'at√≥nito'],
                neutral: ['bien', 'normal', 'com√∫n', 't√≠pico', 'regular', 'moderado', 'est√°ndar']
            },
            fr: {
                joy: ['heureux', 'joyeux', 'content', 'ravi', 'excellent', 'merveilleux', 'amour', 'sourire'],
                sadness: ['triste', 'malheureux', 'd√©prim√©', 'mis√©rable', 'terrible', 'perdu', 'pleurer'],
                anger: ['f√¢ch√©', 'en col√®re', 'furieux', 'irrit√©', 'agac√©', 'haine', 'rage', 'frustr√©'],
                fear: ['effray√©', 'apeur√©', 'inquiet', 'terrifi√©', 'nerveux', 'anxieux', 'panique'],
                surprise: ['surpris', 'choqu√©', '√©tonn√©', 'inattendu', 'incroyable', 'stup√©fait'],
                neutral: ['bien', 'normal', 'moyen', 'habituel', 'typique', 'r√©gulier', 'mod√©r√©']
            },
            te: { // Telugu
                joy: ['‡∞∏‡∞Ç‡∞§‡±ã‡∞∑‡∞Ç', '‡∞Ü‡∞®‡∞Ç‡∞¶‡∞Ç', '‡∞π‡∞∞‡±ç‡∞∑‡∞Ç', '‡∞â‡∞≤‡±ç‡∞≤‡∞æ‡∞∏‡∞Ç', '‡∞Æ‡±Å‡∞¶‡±ç‡∞¶‡±Å', '‡∞™‡±ç‡∞∞‡±á‡∞Æ', '‡∞®‡∞µ‡±ç‡∞µ‡±Å', '‡∞Ü‡∞π‡±ç‡∞≤‡∞æ‡∞¶‡∞Ç', '‡∞∏‡±Å‡∞ñ‡∞Ç', '‡∞™‡±Å‡∞≤‡∞ï‡∞ø‡∞Ç‡∞§'],
                sadness: ['‡∞¶‡±Å‡∞É‡∞ñ‡∞Ç', '‡∞¨‡∞æ‡∞ß', '‡∞µ‡∞ø‡∞ö‡∞æ‡∞∞‡∞Ç', '‡∞ï‡∞®‡±ç‡∞®‡±Ä‡∞∞‡±Å', '‡∞µ‡±á‡∞¶‡∞®', '‡∞ï‡∞∑‡±ç‡∞ü‡∞Ç', '‡∞®‡∞ø‡∞∞‡∞æ‡∞∂', '‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø', '‡∞∂‡±ã‡∞ï‡∞Ç'],
                anger: ['‡∞ï‡±ã‡∞™‡∞Ç', '‡∞∞‡±å‡∞¶‡±ç‡∞∞‡∞Ç', '‡∞Ü‡∞ó‡±ç‡∞∞‡∞π‡∞Ç', '‡∞ï‡±ç‡∞∞‡±ã‡∞ß‡∞Ç', '‡∞ö‡∞ø‡∞∞‡∞æ‡∞ï‡±Å', '‡∞Ö‡∞∏‡∞π‡∞®‡∞Ç', '‡∞Ü‡∞µ‡±á‡∞∂‡∞Ç', '‡∞¶‡±á‡∞∑‡±ç‡∞µ‡∞Ç'],
                fear: ['‡∞≠‡∞Ø‡∞Ç', '‡∞π‡∞°‡∞≤‡±ç', '‡∞¶‡∞°', '‡∞Ö‡∞Ç‡∞ú‡∞ø', '‡∞µ‡∞£‡±Å‡∞ï‡±Å', '‡∞Ü‡∞Ç‡∞¶‡±ã‡∞≥‡∞®', '‡∞ü‡±Ü‡∞®‡±ç‡∞∑‡∞®‡±ç', '‡∞ó‡∞æ‡∞¨‡∞∞‡∞æ'],
                surprise: ['‡∞Ü‡∞∂‡±ç‡∞ö‡∞∞‡±ç‡∞Ø‡∞Ç', '‡∞∑‡∞æ‡∞ï‡±ç', '‡∞Ü‡∞∂‡±ç‡∞ö‡∞∞‡±ç‡∞Ø‡∞ö‡∞ï‡∞ø‡∞§‡∞Ç', '‡∞µ‡∞ø‡∞∏‡±ç‡∞Æ‡∞Ø‡∞Ç', '‡∞Ö‡∞¶‡±Å‡∞∞‡±ç‡∞∏‡±ç', '‡∞Ü‡∞∂‡±ç‡∞ö‡∞∞‡±ç‡∞Ø‡∞™‡∞°‡∞ü‡∞Ç'],
                neutral: ['‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£‡∞Ç', '‡∞Æ‡∞æ‡∞Æ‡±Ç‡∞≤‡±Å', '‡∞∏‡∞æ‡∞Æ‡∞æ‡∞®‡±ç‡∞Ø‡∞Ç', '‡∞ö‡∞ï‡±ç‡∞ï‡∞ó‡∞æ', '‡∞¨‡∞æ‡∞ó‡±Å‡∞®‡±ç‡∞®‡∞¶‡∞ø', '‡∞∏‡∞∞‡±á', '‡∞ì‡∞ï‡±á']
            },

            hi: { // Hindi
                joy: ['‡§ñ‡•Å‡§∂', '‡§Ü‡§®‡§Ç‡§¶', '‡§™‡•ç‡§∞‡§∏‡§®‡•ç‡§®', '‡§π‡§∞‡•ç‡§∑‡§ø‡§§', '‡§Æ‡•Å‡§∏‡•ç‡§ï‡§æ‡§®', '‡§™‡•ç‡§Ø‡§æ‡§∞', '‡§∏‡•Å‡§ñ‡•Ä', '‡§â‡§≤‡•ç‡§≤‡§∏‡§ø‡§§', '‡§™‡•ç‡§∞‡§´‡•Å‡§≤‡•ç‡§≤‡§ø‡§§', '‡§Æ‡§ó‡§®'],
                sadness: ['‡§¶‡•Å‡§É‡§ñ', '‡§â‡§¶‡§æ‡§∏', '‡§¶‡§∞‡•ç‡§¶', '‡§∞‡•ã‡§®‡§æ', '‡§™‡•Ä‡§°‡§º‡§æ', '‡§µ‡§ø‡§∑‡§æ‡§¶', '‡§Æ‡§æ‡§Ø‡•Ç‡§∏', '‡§®‡§ø‡§∞‡§æ‡§∂', '‡§µ‡•ç‡§Ø‡§•‡§ø‡§§'],
                anger: ['‡§ó‡•Å‡§∏‡•ç‡§∏‡§æ', '‡§ï‡•ç‡§∞‡•ã‡§ß', '‡§∞‡•ã‡§∑', '‡§Ü‡§ï‡•ç‡§∞‡•ã‡§∂', '‡§®‡§æ‡§∞‡§æ‡§ú‡§º', '‡§ö‡§ø‡§¢‡§º', '‡§ï‡•Å‡§™‡§ø‡§§', '‡§ñ‡•Ä‡§ù'],
                fear: ['‡§°‡§∞', '‡§≠‡§Ø', '‡§ñ‡•å‡§´', '‡§¶‡§π‡§∂‡§§', '‡§ò‡§¨‡§∞‡§æ‡§π‡§ü', '‡§ö‡§ø‡§Ç‡§§‡§æ', '‡§Ü‡§∂‡§Ç‡§ï‡§æ', '‡§∏‡§π‡§Æ'],
                surprise: ['‡§Ü‡§∂‡•ç‡§ö‡§∞‡•ç‡§Ø', '‡§π‡•à‡§∞‡§æ‡§®', '‡§ö‡§ï‡§ø‡§§', '‡§µ‡§ø‡§∏‡•ç‡§Æ‡§ø‡§§', '‡§Ö‡§ö‡§Ç‡§≠‡§ø‡§§', '‡§∏‡•ç‡§§‡§¨‡•ç‡§ß', '‡§ö‡•å‡§Ç‡§ï‡§æ'],
                neutral: ['‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø', '‡§†‡•Ä‡§ï', '‡§∏‡§æ‡§ß‡§æ‡§∞‡§£', '‡§Æ‡§ß‡•ç‡§Ø‡§Æ', '‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§', '‡§î‡§∏‡§§']
            },

            ta: { // Tamil
                joy: ['‡ÆÆ‡Æï‡Æø‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø', '‡Æö‡Æ®‡Øç‡Æ§‡Øã‡Æ∑‡ÆÆ‡Øç', '‡Æá‡Æ©‡Øç‡Æ™‡ÆÆ‡Øç', '‡ÆÜ‡Æ©‡Æ®‡Øç‡Æ§‡ÆÆ‡Øç', '‡Æ®‡Æ©‡Øç‡Æ±‡ØÅ', '‡ÆÖ‡Æ©‡Øç‡Æ™‡ØÅ', '‡Æ™‡ØÅ‡Æ©‡Øç‡Æ©‡Æï‡Øà', '‡Æï‡Æ≥‡Æø‡Æ™‡Øç‡Æ™‡ØÅ'],
                sadness: ['‡Æö‡Øã‡Æï‡ÆÆ‡Øç', '‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡ÆÆ‡Øç', '‡Æ§‡ØÅ‡ÆØ‡Æ∞‡ÆÆ‡Øç', '‡Æµ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ÆÆ‡Øç', '‡Æï‡Æ£‡Øç‡Æ£‡ØÄ‡Æ∞‡Øç', '‡Æµ‡Øá‡Æ§‡Æ©‡Øà', '‡Æµ‡Æø‡Æö‡Æ©‡ÆÆ‡Øç'],
                anger: ['‡Æï‡Øã‡Æ™‡ÆÆ‡Øç', '‡Æö‡Æø‡Æ©‡ÆÆ‡Øç', '‡ÆÜ‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ÆÆ‡Øç', '‡Æé‡Æ∞‡Æø‡Æö‡Øç‡Æö‡Æ≤‡Øç', '‡Æµ‡ØÜ‡Æ±‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ', '‡Æö‡ØÄ‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç', '‡ÆÖ‡Æ∞‡ØÅ‡Æµ‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ'],
                fear: ['‡Æ™‡ÆØ‡ÆÆ‡Øç', '‡ÆÖ‡Æö‡Øç‡Æö‡ÆÆ‡Øç', '‡Æ§‡Æø‡Æï‡Æø‡Æ≤‡Øç', '‡Æ™‡ØÄ‡Æ§‡Æø', '‡Æï‡Æµ‡Æ≤‡Øà', '‡Æ™‡Æ§‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç', '‡Æï‡Æ≤‡Æï‡Øç‡Æï‡ÆÆ‡Øç'],
                surprise: ['‡ÆÜ‡Æö‡Øç‡Æö‡Æ∞‡Æø‡ÆØ‡ÆÆ‡Øç', '‡Æµ‡Æø‡ÆØ‡Æ™‡Øç‡Æ™‡ØÅ', '‡Æ§‡Æø‡Æï‡Øà‡Æ™‡Øç‡Æ™‡ØÅ', '‡ÆÖ‡Æ§‡Æø‡Æ∞‡Øç‡Æö‡Øç‡Æö‡Æø', '‡Æ™‡Æø‡Æ∞‡ÆÆ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ', '‡Æ§‡Æø‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æü‡Æ≤‡Øç'],
                neutral: ['‡Æö‡Ææ‡Æ§‡Ææ‡Æ∞‡Æ£', '‡Æµ‡Æ¥‡Æï‡Øç‡Æï‡ÆÆ‡Ææ‡Æ©', '‡Æö‡Æ∞‡Æø', '‡Æ®‡Æü‡ØÅ‡Æ®‡Æø‡Æ≤‡Øà', '‡Æ™‡Øä‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ©', '‡Æö‡ØÅ‡ÆÆ‡Ææ‡Æ∞‡Øç']
            },

            ko: { // Korean
                joy: ['ÌñâÎ≥µ', 'Í∏∞ÏÅ®', 'Ï¶êÍ±∞ÏõÄ', 'ÏÇ¨Îûë', 'ÏõÉÏùå', 'Ï¢ãÏïÑ', 'Ïã†ÎÇ®', 'Í∏∞Îªê', 'ÌùêÎ≠á', 'ÌôòÌù¨'],
                sadness: ['Ïä¨Ìîî', 'Ïö∞Ïö∏', 'ÎààÎ¨º', 'ÏïÑÌîî', 'Í¥¥Î°úÏõÄ', 'ÏÑúÍ∏ÄÌîî', 'ÎπÑÌÜµ', 'ÏÉÅÏã¨', 'Ïï†ÌÜµ'],
                anger: ['ÌôîÎÇ®', 'Î∂ÑÎÖ∏', 'ÏßúÏ¶ù', 'Í≤©Î∂Ñ', 'ÏÑ±ÎÇòÎã§', 'Ìù•Î∂Ñ', 'ÎÖ∏Ïó¨ÏõÄ', 'Í≤©ÎÖ∏'],
                fear: ['ÎëêÎ†§ÏõÄ', 'Î¨¥ÏÑúÏõÄ', 'Î∂àÏïà', 'Í≥µÌè¨', 'Í±±Ï†ï', 'Í≤Å', 'Ï°∞ÎßàÏ°∞Îßà', 'Í∏¥Ïû•'],
                surprise: ['ÎÜÄÎûå', 'Ï∂©Í≤©', 'ÍπúÏßù', 'Í≤ΩÏïÖ', 'ÎãπÌô©', 'Í∏∞Ï†àÏ¥àÌíç', 'Í≤ΩÏù¥'],
                neutral: ['Î≥¥ÌÜµ', 'ÏùºÎ∞ò', 'ÌèâÎ≤î', 'Î¨¥ÎÇú', 'Ï†ÅÎãπ', 'ÌèâÏÉÅ', 'Î≥¥Ìé∏']
            },

            ja: { // Japanese
                joy: ['Â¨â„Åó„ÅÑ', 'Âπ∏„Åõ', 'Ê•Ω„Åó„ÅÑ', 'Âñú„Å≥', 'ÊÑõ', 'Á¨ëÈ°î', 'Âπ∏Á¶è', 'ÊúÄÈ´ò', 'Á¥†Êô¥„Çâ„Åó„ÅÑ'],
                sadness: ['ÊÇ≤„Åó„ÅÑ', 'Âàá„Å™„ÅÑ', 'ÂØÇ„Åó„ÅÑ', 'Ëæõ„ÅÑ', 'Ëã¶„Åó„ÅÑ', 'Ê∂ô', 'ÊÇ≤Áóõ', 'Â§±Êúõ'],
                anger: ['ÊÄí„Çä', 'ËÖπÁ´ã„Å§', '„Ç§„É©„Ç§„É©', 'ÊøÄÊÄí', 'ÊÜ§„Çä', '‰∏çÊ©üÂ´å', 'ÊÜé„ÅÑ', 'ËãõÁ´ã„Å°'],
                fear: ['ÊÄñ„ÅÑ', 'ÊÅê„Çå', '‰∏çÂÆâ', 'ÂøÉÈÖç', '„Éì„ÇØ„Éì„ÇØ', 'ÊÅêÊÄñ', '„Éâ„Ç≠„Éâ„Ç≠', 'Á∑äÂºµ'],
                surprise: ['È©ö„Åç', '„Éì„ÉÉ„ÇØ„É™', 'Ë°ùÊíÉ', '‰ª∞Â§©', 'ÊÑèÂ§ñ', 'ÂîñÁÑ∂', 'ÊÑïÁÑ∂'],
                neutral: ['ÊôÆÈÄö', 'ÈÄöÂ∏∏', '‰∏ÄËà¨', 'Âπ≥Âá°', 'Ê®ôÊ∫ñ', 'Âπ≥Â∏∏', '„Åæ„ÅÇ„Åæ„ÅÇ']
            },

            zh: { // Chinese (Simplified)
                joy: ['ÂºÄÂøÉ', 'Âø´‰πê', 'È´òÂÖ¥', 'Âπ∏Á¶è', 'Ê¨¢Âñú', 'ÊÑâÂø´', 'Ê¨¢‰πê', 'ÂñúÊÇ¶', 'Ê¨£ÊÖ∞', 'Êª°ÊÑè'],
                sadness: ['‰º§ÂøÉ', 'ÈöæËøá', 'ÊÇ≤‰º§', 'ÁóõËã¶', 'ÂøßÊÑÅ', 'ÊÇ≤Áóõ', 'Ê≤Æ‰∏ß', 'ÂìÄ‰º§', 'Ëã¶Èó∑'],
                anger: ['ÁîüÊ∞î', 'ÊÑ§ÊÄí', 'ÊÅºÁÅ´', 'Ê∞îÊÑ§', 'Êö¥ÊÄí', 'ÁÅ´Â§ß', 'ÊÅºÊÄí', 'ÂèëÁÅ´'],
                fear: ['ÂÆ≥ÊÄï', 'ÊÅêÊÉß', 'ÊãÖÂøÉ', 'ÊÉäÊÅê', 'ÂøßËôë', 'ÊÉ∂ÊÅê', 'Á¥ßÂº†', 'ÊÉäÊÖå'],
                surprise: ['ÊÉäËÆ∂', 'ÈúáÊÉä', 'ÂêÉÊÉä', 'ÊÑèÂ§ñ', 'ËØßÂºÇ', 'ÊÑïÁÑ∂', 'ÊÉäÂ•á'],
                neutral: ['‰∏ÄËà¨', 'ÊôÆÈÄö', 'Ê≠£Â∏∏', 'Âπ≥Â∏∏', '‰∏ÄËà¨Ëà¨', 'ËøòÂ•Ω', 'ÈÄÇ‰∏≠']
            },
            // Add more languages as needed
        };

        const placeholderTexts = {
            en: "Enter your text here (minimum 3 words)...",
            es: "Ingrese su texto aqu√≠ (m√≠nimo 3 palabras)...",
            fr: "Entrez votre texte ici (minimum 3 mots)...",
            de: "Geben Sie Ihren Text hier ein (mindestens 3 W√∂rter)...",
            it: "Inserisci il tuo testo qui (minimo 3 parole)...",
            pt: "Digite seu texto aqui (m√≠nimo 3 palavras)...",
            nl: "Voer hier uw tekst in (minimaal 3 woorden)...",
            ru: "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å (–º–∏–Ω–∏–º—É–º 3 —Å–ª–æ–≤–∞)...",
            te: "‡∞Æ‡±Ä ‡∞ü‡±Ü‡∞ï‡±ç‡∞∏‡±ç‡∞ü‡±ç‚Äå‡∞®‡∞ø ‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø (‡∞ï‡∞®‡±Ä‡∞∏‡∞Ç 3 ‡∞™‡∞¶‡∞æ‡∞≤‡±Å)...",
            hi: "‡§Ö‡§™‡§®‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Ø‡§π‡§æ‡§Ç ‡§≤‡§ø‡§ñ‡•á‡§Ç (‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 3 ‡§∂‡§¨‡•ç‡§¶)...",
            ta: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æâ‡Æ∞‡Øà‡ÆØ‡Øà ‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç (‡Æï‡ØÅ‡Æ±‡Øà‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ 3 ‡Æö‡Øä‡Æ±‡Øç‡Æï‡Æ≥‡Øç)...",
            ko: "ÌÖçÏä§Ìä∏Î•º Ïó¨Í∏∞Ïóê ÏûÖÎ†•ÌïòÏÑ∏Ïöî (ÏµúÏÜå 3Îã®Ïñ¥)...",
            ja: "„ÉÜ„Ç≠„Çπ„Éà„Çí„Åì„Åì„Å´ÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºàÊúÄ‰Ωé3Ë™ûÔºâ...",
            zh: "Âú®Ê≠§ËæìÂÖ•ÊñáÂ≠óÔºàËá≥Â∞ë3‰∏™ËØçÔºâ...",
        };

        const emotions = [
            { name: 'Joy', icon: 'üòä' },
            { name: 'Sadness', icon: 'üò¢' },
            { name: 'Anger', icon: 'üò†' },
            { name: 'Fear', icon: 'üò®' },
            { name: 'Surprise', icon: 'üòÆ' },
            { name: 'Neutral', icon: 'üòê' }
        ];

        let chart;

        function detectLanguage(text) {
            const selectedLanguage = document.getElementById('languageSelect').value;
            if (selectedLanguage !== 'auto') {
                return selectedLanguage;
            }

            // Simple language detection based on character sets and common words
            const langPatterns = {
                zh: /[\u4E00-\u9FFF]/,
                ja: /[\u3040-\u309F\u30A0-\u30FF]/,
                ko: /[\u3130-\u318F\uAC00-\uD7AF]/,
                ru: /[\u0400-\u04FF]/,
                // Add more patterns as needed
            };

            for (const [lang, pattern] of Object.entries(langPatterns)) {
                if (pattern.test(text)) {
                    return lang;
                }
            }

            // Default to English if no specific pattern is matched
            return 'en';
        }

        function updatePlaceholder() {
            const select = document.getElementById('languageSelect');
            const textarea = document.getElementById('textInput');
            const lang = select.value;
            
            if (lang !== 'auto') {
                textarea.placeholder = placeholderTexts[lang] || placeholderTexts.en;
            } else {
                textarea.placeholder = placeholderTexts.en;
            }
        }

        function initChart() {
            const ctx = document.getElementById('emotionChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: emotions.map(e => e.name),
                    datasets: [{
                        label: 'Emotion Intensity',
                        data: emotions.map(() => 0),
                        backgroundColor: 'rgba(99, 102, 241, 0.2)',
                        borderColor: 'rgba(99, 102, 241, 0.8)',
                        pointBackgroundColor: 'rgba(99, 102, 241, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(99, 102, 241, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            angleLines: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function updateChart(results) {
            chart.data.datasets[0].data = results.map(r => r.confidence);
            chart.update();
        }

        function preprocessText(text) {
            return text.toLowerCase()
                      .replace(/[^\w\s\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\u3130-\u318F\uAC00-\uD7AF\u0400-\u04FF]/gi, ' ')
                      .replace(/\s+/g, ' ')
                      .trim();
        }

        function classifyEmotions(text, language) {
            const words = text.split(' ');
            const keywords = emotionKeywords[language] || emotionKeywords.en;
            const scores = Object.fromEntries(emotions.map(e => [e.name.toLowerCase(), 0]));
            let totalMatches = 0;

            words.forEach(word => {
                Object.entries(keywords).forEach(([emotion, emotionWords]) => {
                    if (emotionWords.includes(word)) {
                        scores[emotion]++;
                        totalMatches++;
                    }
                });
            });

            // If no emotions detected, increase neutral score
            if (totalMatches === 0) {
                scores.neutral = 1;
                totalMatches = 1;
            }

            // Convert to percentages
            Object.keys(scores).forEach(emotion => {
                scores[emotion] = (scores[emotion] / totalMatches) * 100;
            });

            return emotions.map(emotion => ({
                ...emotion,
                confidence: scores[emotion.name.toLowerCase()]
            }));
        }

        const emotionNames = {
            en: {
                Joy: 'Joy',
                Sadness: 'Sadness',
                Anger: 'Anger',
                Fear: 'Fear',
                Surprise: 'Surprise',
                Neutral: 'Neutral'
            },
            es: {
                Joy: 'Alegr√≠a',
                Sadness: 'Tristeza',
                Anger: 'Enojo',
                Fear: 'Miedo',
                Surprise: 'Sorpresa',
                Neutral: 'Neutral'
            },
            fr: {
                Joy: 'Joie',
                Sadness: 'Tristesse',
                Anger: 'Col√®re',
                Fear: 'Peur',
                Surprise: 'Surprise',
                Neutral: 'Neutre'
            },
            te: { // Telugu
                Joy: '‡∞∏‡∞Ç‡∞§‡±ã‡∞∑‡∞Ç',
                Sadness: '‡∞¶‡±Å‡∞É‡∞ñ‡∞Ç',
                Anger: '‡∞ï‡±ã‡∞™‡∞Ç',
                Fear: '‡∞≠‡∞Ø‡∞Ç',
                Surprise: '‡∞Ü‡∞∂‡±ç‡∞ö‡∞∞‡±ç‡∞Ø‡∞Ç',
                Neutral: '‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£‡∞Ç'
            },
            hi: { // Hindi
                Joy: '‡§ñ‡•Å‡§∂‡•Ä',
                Sadness: '‡§¶‡•Å‡§É‡§ñ',
                Anger: '‡§ï‡•ç‡§∞‡•ã‡§ß',
                Fear: '‡§≠‡§Ø',
                Surprise: '‡§Ü‡§∂‡•ç‡§ö‡§∞‡•ç‡§Ø',
                Neutral: '‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø'
            },
            ta: { // Tamil
                Joy: '‡ÆÆ‡Æï‡Æø‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø',
                Sadness: '‡Æö‡Øã‡Æï‡ÆÆ‡Øç',
                Anger: '‡Æï‡Øã‡Æ™‡ÆÆ‡Øç',
                Fear: '‡Æ™‡ÆØ‡ÆÆ‡Øç',
                Surprise: '‡ÆÜ‡Æö‡Øç‡Æö‡Æ∞‡Æø‡ÆØ‡ÆÆ‡Øç',
                Neutral: '‡Æö‡Ææ‡Æ§‡Ææ‡Æ∞‡Æ£'
            },
            ko: { // Korean
                Joy: 'Í∏∞ÏÅ®',
                Sadness: 'Ïä¨Ìîî',
                Anger: 'Î∂ÑÎÖ∏',
                Fear: 'ÎëêÎ†§ÏõÄ',
                Surprise: 'ÎÜÄÎûå',
                Neutral: 'Î≥¥ÌÜµ'
            },
            ja: { // Japanese
                Joy: 'Âñú„Å≥',
                Sadness: 'ÊÇ≤„Åó„Åø',
                Anger: 'ÊÄí„Çä',
                Fear: 'ÊÅê„Çå',
                Surprise: 'È©ö„Åç',
                Neutral: 'ÊôÆÈÄö'
            },
            zh: { // Chinese
                Joy: 'Âø´‰πê',
                Sadness: 'ÊÇ≤‰º§',
                Anger: 'ÊÑ§ÊÄí',
                Fear: 'ÊÅêÊÉß',
                Surprise: 'ÊÉäËÆ∂',
                Neutral: 'ÊôÆÈÄö'
            }

            // Add more languages as needed
        };

        async function analyzeText() {
            const textInput = document.getElementById('textInput');
            const analyzeButton = document.getElementById('analyzeButton');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const detectedLanguageDiv = document.getElementById('detectedLanguage');
            const text = textInput.value.trim();

            if (text.split(/\s+/).length < 3) {
                alert('Please enter at least 3 words for analysis');
                return;
            }

            try {
                analyzeButton.disabled = true;
                loadingIndicator.style.display = 'flex';

                const processedText = preprocessText(text);
                const detectedLang = detectLanguage(processedText);
                const results = classifyEmotions(processedText, detectedLang);

                // Update detected language display
                const langNames = {
                    en: 'English',
                    es: 'Spanish',
                    fr: 'French',
                    de: 'German',
                    it: 'Italian',
                    pt: 'Portuguese',
                    nl: 'Dutch',
                    ru: 'Russian',
                    zh: 'Chinese',
                    ja: 'Japanese',
                    ko: 'Korean'
                };
                detectedLanguageDiv.textContent = `Detected Language: ${langNames[detectedLang] || detectedLang}`;

                // Update chart labels with translated emotion names
                const translatedEmotions = emotionNames[detectedLang] || emotionNames.en;
                chart.data.labels = emotions.map(e => translatedEmotions[e.name] || e.name);
                
                displayResults(results, detectedLang);
                updateChart(results);

            } catch (error) {
                console.error('Analysis error:', error);
                alert('An error occurred during analysis. Please try again.');
            } finally {
                analyzeButton.disabled = false;
                loadingIndicator.style.display = 'none';
            }
        }

        function displayResults(results, language) {
            const resultsGrid = document.getElementById('resultsGrid');
            const translatedEmotions = emotionNames[language] || emotionNames.en;
            
            resultsGrid.innerHTML = results.map(result => `
                <div class="emotion-card">
                    <div class="emotion-header">
                        <span class="emotion-icon">${result.icon}</span>
                        <span>${translatedEmotions[result.name] || result.name}</span>
                    </div>
                    <div class="confidence-bar">
                        <div class="confidence-level" style="width: ${result.confidence}%"></div>
                    </div>
                    <div>${result.confidence.toFixed(1)}%</div>
                </div>
            `).join('');
        }

        function clearText() {
            document.getElementById('textInput').value = '';
            document.getElementById('resultsGrid').innerHTML = '';
            document.getElementById('detectedLanguage').textContent = '';
            updateChart(emotions.map(() => ({ confidence: 0 })));
        }

        document.addEventListener('DOMContentLoaded', () => {
            initChart();
            updatePlaceholder();
        });
    </script>
</body>
</html>